[gd_scene load_steps=19 format=4 uid="uid://bnpo242tfas6l"]

[ext_resource type="Script" uid="uid://d2eyblbal755o" path="res://Levels/scripts/level.gd" id="1_gocoa"]
[ext_resource type="AudioStream" uid="uid://io7jxqk648xa" path="res://Levels/music/example_music_01.ogg" id="2_j4y68"]
[ext_resource type="PackedScene" uid="uid://cq32mohonpsw3" path="res://Tile Maps/grass-tiles-01.tscn" id="3_hh5ne"]
[ext_resource type="PackedScene" uid="uid://dr4blo7ya448q" path="res://Levels/player_spawn.tscn" id="4_8cg85"]
[ext_resource type="PackedScene" uid="uid://bi8crg3nv50qw" path="res://npc/npc.tscn" id="5_g6g4m"]
[ext_resource type="Resource" uid="uid://csvi3x1wp3gy6" path="res://npc/00_npcs/npc_01.tres" id="6_86h4m"]
[ext_resource type="PackedScene" uid="uid://dapdr3ojo2pha" path="res://npc/npc_behavior_wander.tscn" id="7_jnq63"]
[ext_resource type="PackedScene" uid="uid://b22o8rtjyby8c" path="res://Interactables/dialog/dialog_interaction.tscn" id="8_x30po"]
[ext_resource type="Script" uid="uid://7qrcj0xrfdwc" path="res://Interactables/dialog/scripts/dialog_text.gd" id="9_bchre"]
[ext_resource type="Resource" uid="uid://cdc3sykvmnn27" path="res://npc/00_npcs/00_hero.tres" id="10_4jsar"]
[ext_resource type="Script" uid="uid://buocbwkhn4gj6" path="res://Interactables/dialog/scripts/cutscene_action_animation.gd" id="10_jnq63"]
[ext_resource type="Script" uid="uid://0mcihlaufovq" path="res://Interactables/dialog/scripts/dialog_cutscene.gd" id="11_86h4m"]
[ext_resource type="Script" uid="uid://cof5epf5dwei1" path="res://Interactables/dialog/scripts/cutscene_action_move.gd" id="12_x30po"]
[ext_resource type="PackedScene" uid="uid://cf0a8hxch6kfd" path="res://Props/pot/pot.tscn" id="14_bchre"]

[sub_resource type="Animation" id="Animation_bchre"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("DirectionalLight2D:energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_x30po"]
resource_name = "fade_to_black"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("DirectionalLight2D:energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 0.5]
}

[sub_resource type="Animation" id="Animation_jnq63"]
resource_name = "fade_to_normal"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("DirectionalLight2D:energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.5, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_4jsar"]
_data = {
&"RESET": SubResource("Animation_bchre"),
&"fade_to_black": SubResource("Animation_x30po"),
&"fade_to_normal": SubResource("Animation_jnq63")
}

[node name="04_cutscene_test" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_gocoa")
music = ExtResource("2_j4y68")

[node name="grass-tiles-01" parent="." instance=ExtResource("3_hh5ne")]
tile_map_data = PackedByteArray("AAAAAP//AAACAAUAAAAAAAAAAAACAAYAAAAAAAEAAAANAAQAAAAAAAIAAAANAAUAAAAAAAMAAAANAAUAAAAAAAQAAAANAAUAAAAAAAUAAAANAAUAAAAAAAYAAAANAAUAAAAAAAcAAAANAAUAAAAAAAgAAAANAAUAAAABAP//AAADAAUAAAABAAAAAAADAAYAAAABAAEAAAAOAAQAAAABAAIAAAAOAAUAAAABAAMAAAAOAAUAAAABAAQAAAAOAAUAAAABAAUAAAAOAAUAAAABAAYAAAAOAAUAAAABAAcAAAAOAAUAAAABAAgAAAAOAAUAAAACAP//AAAEAAUAAAACAAAAAAAEAAYAAAACAAEAAAACAAAAAAACAAIAAAACAAAAAAACAAMAAAACAAAAAAACAAQAAAACAAAAAAACAAUAAAACAAAAAAACAAYAAAACAAAAAAACAAcAAAACAAAAAAACAAgAAAAKAAQAAAADAP//AAACAAUAAAADAAAAAAACAAYAAAADAAEAAAAAAAAAAAADAAIAAAAAAAAAAAADAAMAAAAAAAAAAAADAAQAAAAAAAAAAAADAAUAAAAAAAAAAAADAAYAAAAAAAAAAAADAAcAAAAAAAAAAAADAAgAAAALAAQAAAAEAP//AAADAAUAAAAEAAAAAAADAAYAAAAEAAEAAAABAAAAAAAEAAIAAAABAAAAAAAEAAMAAAABAAAAAAAEAAQAAAABAAAAAAAEAAUAAAACAAEAAAAEAAYAAAABAAAAAAAEAAcAAAABAAAAAAAEAAgAAAAMAAQAAAAFAP//AAAEAAUAAAAFAAAAAAAEAAYAAAAFAAEAAAACAAAAAAAFAAIAAAACAAAAAAAFAAMAAAACAAAAAAAFAAQAAAACAAAAAAAFAAUAAAACAAAAAAAFAAYAAAACAAAAAAAFAAcAAAACAAAAAAAFAAgAAAANAAQAAAAGAP//AAACAAUAAAAGAAAAAAACAAYAAAAGAAEAAAAAAAAAAAAGAAIAAAAAAAAAAAAGAAMAAAAAAAAAAAAGAAQAAAAAAAAAAAAGAAUAAAAAAAAAAAAGAAYAAAAAAAAAAAAGAAcAAAAAAAAAAAAGAAgAAAALAAQAAAAHAP//AAADAAUAAAAHAAAAAAADAAYAAAAHAAEAAAABAAAAAAAHAAIAAAABAAAAAAAHAAMAAAABAAAAAAAHAAQAAAABAAAAAAAHAAUAAAABAAAAAAAHAAYAAAABAAAAAAAHAAcAAAABAAAAAAAHAAgAAAAMAAQAAAAIAP//AAAEAAUAAAAIAAAAAAAEAAYAAAAIAAEAAAACAAAAAAAIAAIAAAACAAAAAAAIAAMAAAACAAAAAAAIAAQAAAACAAAAAAAIAAUAAAACAAAAAAAIAAYAAAACAAAAAAAIAAcAAAACAAAAAAAIAAgAAAANAAQAAAAJAP//AAACAAUAAAAJAAAAAAACAAYAAAAJAAEAAAAAAAAAAAAJAAIAAAAAAAAAAAAJAAMAAAAAAAAAAAAJAAQAAAAAAAAAAAAJAAUAAAAAAAAAAAAJAAYAAAAAAAAAAAAJAAcAAAAAAAAAAAAJAAgAAAALAAQAAAAKAP//AAADAAUAAAAKAAAAAAADAAYAAAAKAAEAAAABAAAAAAAKAAIAAAABAAAAAAAKAAMAAAABAAAAAAAKAAQAAAABAAAAAAAKAAUAAAABAAAAAAAKAAYAAAABAAAAAAAKAAcAAAABAAAAAAAKAAgAAAAMAAQAAAALAP//AAAEAAUAAAALAAAAAAAEAAYAAAALAAEAAAACAAAAAAALAAIAAAACAAAAAAALAAMAAAACAAAAAAALAAQAAAACAAAAAAALAAUAAAACAAAAAAALAAYAAAACAAAAAAALAAcAAAACAAAAAAALAAgAAAANAAQAAAAMAP//AAACAAUAAAAMAAAAAAACAAYAAAAMAAEAAAAAAAAAAAAMAAIAAAAAAAAAAAAMAAMAAAAAAAAAAAAMAAQAAAAAAAAAAAAMAAUAAAAAAAAAAAAMAAYAAAAAAAAAAAAMAAcAAAAAAAAAAAAMAAgAAAALAAQAAAANAP//AAADAAUAAAANAAAAAAADAAYAAAANAAEAAAABAAAAAAANAAIAAAABAAAAAAANAAMAAAABAAAAAAANAAQAAAABAAAAAAANAAUAAAABAAAAAAANAAYAAAABAAAAAAANAAcAAAABAAAAAAANAAgAAAAMAAQAAAAOAP//AAAEAAUAAAAOAAAAAAAEAAYAAAAOAAEAAAACAAAAAAAOAAIAAAACAAAAAAAOAAMAAAACAAAAAAAOAAQAAAACAAAAAAAOAAUAAAACAAAAAAAOAAYAAAACAAAAAAAOAAcAAAACAAAAAAAOAAgAAAANAAQAAAAPAP//AAACAAUAAAAPAAAAAAACAAYAAAAPAAEAAAAAAAAAAAAPAAIAAAAAAAAAAAAPAAMAAAAAAAAAAAAPAAQAAAAAAAAAAAAPAAUAAAAAAAAAAAAPAAYAAAAAAAAAAAAPAAcAAAAAAAAAAAAPAAgAAAALAAQAAAAQAP//AAADAAUAAAAQAAAAAAADAAYAAAAQAAEAAAAKAAQAAAAQAAIAAAAKAAUAAAAQAAMAAAAKAAUAAAAQAAQAAAAKAAUAAAAQAAUAAAAKAAUAAAAQAAYAAAAKAAYAAAAQAAcAAAAKAAcAAAAQAAgAAAAMAAQAAAA=")

[node name="PlayerSpawn" parent="." instance=ExtResource("4_8cg85")]
position = Vector2(210, 158)

[node name="NPC" parent="." instance=ExtResource("5_g6g4m")]
position = Vector2(322, 154)
npc_resource = ExtResource("6_86h4m")

[node name="NpcBehaviorWander" parent="NPC" instance=ExtResource("7_jnq63")]
wander_range = 1

[node name="DialogInteraction" parent="NPC" instance=ExtResource("8_x30po")]

[node name="DialogCutscene_MOVE" type="Node" parent="NPC/DialogInteraction"]
script = ExtResource("11_86h4m")
metadata/_custom_type_script = "uid://0mcihlaufovq"

[node name="CutsceneActionMove" type="Node2D" parent="NPC/DialogInteraction/DialogCutscene_MOVE" node_paths=PackedStringArray("object_to_move")]
position = Vector2(251, 90)
script = ExtResource("12_x30po")
timing_method = 1
object_to_move = NodePath("../../..")
move_duration = 2.0
move_speed = 100.0
metadata/_custom_type_script = "uid://cof5epf5dwei1"

[node name="CutsceneActionMove2" type="Node2D" parent="NPC/DialogInteraction/DialogCutscene_MOVE" node_paths=PackedStringArray("object_to_move")]
position = Vector2(251, 226)
script = ExtResource("12_x30po")
timing_method = 1
object_to_move = NodePath("../../..")
move_duration = 2.0
move_speed = 400.0
metadata/_custom_type_script = "uid://cof5epf5dwei1"

[node name="CutsceneActionMove3" type="Node2D" parent="NPC/DialogInteraction/DialogCutscene_MOVE" node_paths=PackedStringArray("object_to_move")]
position = Vector2(395, 178)
script = ExtResource("12_x30po")
object_to_move = NodePath("../../../../Pot")
transition_type = 5
easing_method = 0
move_duration = 1.5
metadata/_custom_type_script = "uid://cof5epf5dwei1"

[node name="DialogCutscene" type="Node" parent="NPC/DialogInteraction"]
script = ExtResource("11_86h4m")
metadata/_custom_type_script = "uid://0mcihlaufovq"

[node name="CutsceneActionAnimation2" type="Node2D" parent="NPC/DialogInteraction/DialogCutscene" node_paths=PackedStringArray("animation_player")]
script = ExtResource("10_jnq63")
animation_player = NodePath("../../../../AnimationPlayer")
animation_name = "fade_to_black"
metadata/_custom_type_script = "uid://buocbwkhn4gj6"

[node name="DialogText" type="Node" parent="NPC/DialogInteraction"]
script = ExtResource("9_bchre")
text = "
Hey, who turned out the lights!?"
npc_info = ExtResource("6_86h4m")

[node name="DialogText2" type="Node" parent="NPC/DialogInteraction"]
script = ExtResource("9_bchre")
text = "
[wave]It wasn't me![/wave]"
npc_info = ExtResource("10_4jsar")

[node name="DialogCutscene2" type="Node" parent="NPC/DialogInteraction"]
script = ExtResource("11_86h4m")
metadata/_custom_type_script = "uid://0mcihlaufovq"

[node name="CutsceneActionAnimation3" type="Node2D" parent="NPC/DialogInteraction/DialogCutscene2" node_paths=PackedStringArray("animation_player")]
script = ExtResource("10_jnq63")
animation_player = NodePath("../../../../AnimationPlayer")
animation_name = "fade_to_normal"
metadata/_custom_type_script = "uid://buocbwkhn4gj6"

[node name="DialogText3" type="Node" parent="NPC/DialogInteraction"]
script = ExtResource("9_bchre")
text = "
Oh nice, the lights are back!"
npc_info = ExtResource("6_86h4m")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_4jsar")
}

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
energy = 0.0
blend_mode = 1

[node name="Pot" parent="." instance=ExtResource("14_bchre")]
position = Vector2(392, 104)
